version: "3.2"

#docker-compose.override.yml is loaded and merged with docker-compose.yml by default when calling docker-compose up.
#This file won't be merged when using docker-compose -f docker-compose.yml up (or using any other compose file).
services:
  #  router:
  #    volumes:
  #      - /var/run/docker.sock:/tmp/docker.sock:ro
  #      - ./.certs:/etc/nginx/certs
  #      - ./docker/router/my_proxy.conf:/etc/nginx/conf.d/my_proxy.conf:ro

  #  admin:
  #    volumes:
  #      - ./client/src:/var/www/src
  #      - ./client/public/assets:/var/www/public/assets
  #      - ./client/tests:/var/www/tests
  #      - ./client/frontend.env:/var/www/frontend.env
  #      - ./client/admin.env:/var/www/admin.env
  #      - ./client/templates:/var/www/templates
  #      - ./client/translations:/var/www/translations
  #      - ./client/phpstan.neon:/var/www/phpstan.neon
  #      - ./client/bin:/var/www/vendor/bin
  #      - ./client/composer.json:/var/www/composer.json
  #      - ./client/composer.lock:/var/www/composer.lock
  #      - ./docker/install-composer.sh:/var/www/install-composer.sh

  api:
    volumes:
      - ./api/app:/var/www/app
      - ./api/config:/var/www/config
      - ./api/src/Migrations:/var/www/src/Migrations
      - ./api/public:/var/www/public
      - ./api/scripts:/var/www/scripts
      - ./api/src:/var/www/src
      - ./api/tests:/var/www/tests
      - ./api/api.env:/var/www/api.env
      - ./api/postgres.env:/var/www/postgres.env
      - ./api/phpstan.neon:/var/www/phpstan.neon
      - ./api/bin:/var/www/vendor/bin
      - ./api/composer.json:/var/www/composer.json
      - ./api/composer.lock:/var/www/composer.lock
      - ./docker/install-composer.sh:/var/www/install-composer.sh

  #  frontend:
  #    volumes:
  #      - ./client/src:/var/www/src
  #      - ./client/public/assets:/var/www/public/assets
  #      - ./client/tests:/var/www/tests
  #      - ./client/frontend.env:/var/www/frontend.env
  #      - ./client/admin.env:/var/www/admin.env
  #      - ./client/templates:/var/www/templates
  #      - ./client/translations:/var/www/translations
  #      - ./client/phpstan.neon:/var/www/phpstan.neon
  #      - ./client/bin:/var/www/vendor/bin
  #      - ./client/composer.json:/var/www/composer.json
  #      - ./client/composer.lock:/var/www/composer.lock
  #      - ./docker/install-composer.sh:/var/www/install-composer.sh

  htmltopdf:
    volumes:
      - ./htmltopdf/app.py:/app.py

  synchronisation:
    volumes:
      - ./lambdas/functions/synchronisation/.aws-lambda-rie:/aws-lambda

  mock-notify-api:
    volumes:
      - ./client/govuk-notifications.yaml:/tmp/govuk-notifications.yaml

  aws:
    volumes:
      - .:/app
