version: "3.2"
services:
  api:
    image: ${AWS_REGISTRY}/digideps/api:${VERSION}
    build: ./api
  client:
    image: ${AWS_REGISTRY}/digideps/client:${VERSION}
    build: ./client
    depends_on:
      - assets
  assets:
    build:
      context: ./client
      dockerfile: ./assets.Dockerfile
    volumes:
        - ./client/public:/app/public   
  sync:
    image: ${AWS_REGISTRY}/digideps/sync:${VERSION}
    build: ./sync
  htmltopdf:
    image: ${AWS_REGISTRY}/digideps/htmltopdf:${VERSION}
    build: ./htmltopdf
  drbackup:
    image: ${AWS_REGISTRY}/digideps/dr-backup:${VERSION}
    build: ./dr_backup
