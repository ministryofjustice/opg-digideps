parameters:
  # To avoid undefined variable errors at build time during clear-cache, we can define default values for env vars
  # At runtime Symfony will fetch the actual value from the environment
  env(AUDIT_LOG_GROUP_NAME): 'dummy-build-time-value-overridden-at-runtime'

services:
  Aws\CloudWatchLogs\CloudWatchLogsClient:
    class: Aws\CloudWatchLogs\CloudWatchLogsClient
    arguments: ["%cloudwatch_logs_client_params%"]


  App\Service\Audit\AwsAuditLogHandler:
    class: App\Service\Audit\AwsAuditLogHandler
    arguments:
      - '@Aws\CloudWatchLogs\CloudWatchLogsClient'
      - '%env(AUDIT_LOG_GROUP_NAME)%'

  App\Service\Audit\LocalAuditLogHandler:
    class: App\Service\Audit\LocalAuditLogHandler
