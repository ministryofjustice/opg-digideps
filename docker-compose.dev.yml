version: '3.2'

services:
    test:
        build: ./api
        depends_on:
            - localstack
            - mock-sirius-integration
        volumes:
            - ./api/tests/Behat:/var/www/tests/Behat
            - ./api/src:/var/www/src
            - ./api/tests/Behat/snapshots:/tmp/html
        env_file:
            - ./api/api.env
            - ./api/tests/Behat/test.env
            - ./api/tests/Behat/.env

    composerapi:
        image: composer:2.1.2
        volumes:
            - ./api/:/app

    composerfront:
        image: composer:2.1.2
        volumes:
            - ./client/:/app

    frontend:
        env_file:
            - .env
        volumes:
            - ./client/public:/app/public

    admin:
        env_file:
            - .env
