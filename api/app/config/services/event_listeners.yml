services:
    AppBundle\EventListener\RestInputOuputFormatter:
        arguments: [ "@jms_serializer", "@logger", ["json"], "json", "%kernel.debug%" ]
        public: true
        tags:
            - { name: kernel.event_listener, event: kernel.view, method: onKernelView }
            - { name: kernel.event_listener, event: kernel.exception, method: onKernelException }
            - { name: kernel.event_listener, event: kernel.request, method: onKernelRequest }

    AppBundle\EventListener\DoctrineListener:
        tags:
            - { name: doctrine.event_listener, event: prePersist, method: prePersist }
            - { name: doctrine.event_listener, event: preUpdate, method: preUpdate }
            - { name: doctrine.event_listener, event: preRemove, method: preRemove }

    AppBundle\EventListener\FixDefaultSchemaListener:
        class: AppBundle\EventListener\FixDefaultSchemaListener
        tags:
            - { name: doctrine.event_listener, event: postGenerateSchema, method: postGenerateSchema }

    AppBundle\EventListener\UserListener:
        autowire: true
        autoconfigure: true
        arguments:
            $security: '@Symfony\Component\Security\Core\Security'
            $logger: '@logger'
            $auditEvents: '@AppBundle\Service\Audit\AuditEvents'
        tags:
            - { name: doctrine.orm.entity_listener, event: preUpdate, entity: AppBundle\Entity\User }
            - { name: doctrine.orm.entity_listener, event: postUpdate, entity: AppBundle\Entity\User }

    AppBundle\EventListener\ClientListener:
        autowire: true
        autoconfigure: true
        tags:
            - { name: doctrine.orm.entity_listener, event: preUpdate, entity: AppBundle\Entity\Client }
            - { name: doctrine.orm.entity_listener, event: postUpdate, entity: AppBundle\Entity\Client }
